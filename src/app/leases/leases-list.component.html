<div class='leases-container'>

  <table mat-table [dataSource]="leases" class="mat-elevation-z8">

    <ng-container matColumnDef="id">
      <th mat-header-cell *matHeaderCellDef> ID </th>
      <td mat-cell *matCellDef="let lease"> {{lease.id}} </td>
    </ng-container>

    <ng-container matColumnDef="user">
      <th mat-header-cell *matHeaderCellDef> Email </th>
      <td mat-cell *matCellDef="let lease"> {{lease.user.email}} </td>
    </ng-container>

    <ng-container matColumnDef="timeOfLease">
      <th mat-header-cell *matHeaderCellDef> Time of lease </th>
      <td mat-cell *matCellDef="let lease"> {{lease.timeOfLease  | date:'dd-MMM yyyy   HH:mm:ss'}} </td>
    </ng-container>

    <ng-container matColumnDef="dueTime">
      <th mat-header-cell *matHeaderCellDef> Due time </th>
      <td mat-cell *matCellDef="let lease"> {{lease.dueTime  | date:'dd-MMM yyyy   HH:mm:ss'}} </td>
    </ng-container>

    <ng-container matColumnDef="inventoryBook">
      <th mat-header-cell *matHeaderCellDef> Book name </th>
      <td mat-cell *matCellDef="let lease"> {{lease.inventoryBook.catalogBook.title}} </td>
    </ng-container>

    <ng-container matColumnDef="returned">
      <th mat-header-cell *matHeaderCellDef> Returned </th>
      <td mat-cell *matCellDef="let lease">{{lease.returned ? 'Yes' : 'No'}}</td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;" [ngClass]="{
        'red': isLeaseExpired(row.dueTime),
        'green':row.returned }" [hidden]="row.returned && hideFinishedLeases" (click)="openDialog(row)"></tr>

      </table>
      <mat-paginator [length]="100" [pageSize]="2" [pageSizeOptions]="[5, 10, 25, 100]"> </mat-paginator>

  <div class='information'>
    <span class='bg bg-red'></span> <span class='description'>Not returned & expired</span>
    <span class='bg bg-green'></span> <span class='description'>Returned in time</span>
  </div>
</div>
